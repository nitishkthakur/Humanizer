<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Humanizer - AI Text Processing Tool</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/styles.css">
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://unpkg.com/htmx.org@1.9.8"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body x-data="app()">
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="app-title">Humanizer</h1>
            </div>
            <nav class="sidebar-nav">
                <button 
                    class="nav-item" 
                    :class="{ 'active': currentPage === 'humanize' }"
                    @click="currentPage = 'humanize'"
                >
                    Write & Humanize
                </button>
                <button 
                    class="nav-item" 
                    :class="{ 'active': currentPage === 'chat' }"
                    @click="currentPage = 'chat'"
                >
                    Chat
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Write & Humanize Page -->
            <div x-show="currentPage === 'humanize'" class="page humanize-page">
                <div class="page-header">
                    <h2>Write & Humanize</h2>
                    <p>Transform AI-generated text into natural, human-like content</p>
                </div>
                
                <div class="content-grid">
                    <!-- Left Section -->
                    <div class="left-section">
                        <div class="input-section">
                            <div class="input-controls">
                                <div class="control-group">
                                    <label for="model-select" class="section-label">Model</label>
                                    <select id="model-select" x-model="selectedModel" class="model-select">
                                        <option value="llama-3.3-70b-versatile">llama-3.3-70b-versatile</option>
                                        <option value="llama-3.1-8b-instant">llama-3.1-8b-instant</option>
                                        <option value="gemma2-9b-it">gemma2-9b-it</option>
                                        <option disabled>──────────────────</option>
                                        <option value="meta-llama/llama-4-maverick-17b-128e-instruct">meta-llama/llama-4-maverick-17b-128e-instruct</option>
                                        <option value="meta-llama/llama-4-scout-17b-16e-instruct">meta-llama/llama-4-scout-17b-16e-instruct</option>
                                    </select>
                                </div>
                                <div class="control-group prompt-group">
                                    <label for="prompt-input" class="section-label">Your Prompt</label>
                                    <textarea 
                                        id="prompt-input"
                                        x-model="prompt"
                                        placeholder="Enter your text or prompt here..."
                                        class="prompt-input"
                                        rows="4"
                                    ></textarea>
                                    <button 
                                        class="generate-btn"
                                        @click="generateResponse()"
                                        :disabled="!prompt.trim() || generating"
                                    >
                                        <span x-show="!generating">Generate</span>
                                        <span x-show="generating" class="spinner-container">
                                            <div class="spinner"></div>
                                            Generating...
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="output-section">
                            <label class="section-label">AI Response</label>
                            <div class="ai-response" x-html="aiResponseMarkdown || 'AI response will appear here...'"></div>
                        </div>
                    </div>

                    <!-- Right Section -->
                    <div class="right-section">
                        <div class="controls-section">
                            <label class="section-label">Processing Mode</label>
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="mode" value="llm_approach" x-model="mode">
                                    <span class="radio-label">LLM Approach</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="mode" value="work_in_progress" x-model="mode">
                                    <span class="radio-label">Work in Progress</span>
                                </label>
                            </div>
                            
                            <button 
                                class="humanize-btn"
                                @click="humanizeText()"
                                :disabled="!prompt.trim() || loading"
                            >
                                <span x-show="!loading">Humanize</span>
                                <span x-show="loading" class="spinner-container">
                                    <div class="spinner"></div>
                                    Processing...
                                </span>
                            </button>
                        </div>
                        
                        <div class="humanized-section">
                            <label class="section-label" x-text="humanizedSectionLabel"></label>
                            <div class="humanized-output" x-html="humanizedOutputFormatted"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Page -->
            <div x-show="currentPage === 'chat'" class="page chat-page">
                <div class="page-header">
                    <h2>Chat</h2>
                    <p>Have a conversation with AI</p>
                </div>
                
                <div class="chat-model-section">
                    <label for="chat-model-select" class="section-label">Chat Model</label>
                    <select id="chat-model-select" x-model="chatSelectedModel" class="model-select">
                        <option value="llama-3.3-70b-versatile">llama-3.3-70b-versatile</option>
                        <option value="llama-3.1-8b-instant">llama-3.1-8b-instant</option>
                        <option value="gemma2-9b-it">gemma2-9b-it</option>
                        <option disabled>──────────────────</option>
                        <option value="meta-llama/llama-4-maverick-17b-128e-instruct">meta-llama/llama-4-maverick-17b-128e-instruct</option>
                        <option value="meta-llama/llama-4-scout-17b-16e-instruct">meta-llama/llama-4-scout-17b-16e-instruct</option>
                    </select>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <template x-for="message in chatMessages" :key="message.id">
                            <div class="message" :class="message.type">
                                <div class="message-content" x-text="message.content"></div>
                                <div class="message-time" x-text="message.time"></div>
                            </div>
                        </template>
                    </div>
                    
                    <div class="chat-input-section">
                        <div class="chat-input-container">
                            <input 
                                type="text" 
                                x-model="chatInput"
                                @keydown.enter="sendMessage()"
                                placeholder="Type your message..."
                                class="chat-input"
                                :disabled="chatLoading"
                            >
                            <button 
                                class="clear-btn"
                                @click="clearChat()"
                                :disabled="chatLoading || clearingChat"
                                title="Clear conversation"
                            >
                                <span x-show="!clearingChat">Clear</span>
                                <span x-show="clearingChat" class="spinner-container">
                                    <div class="spinner"></div>
                                </span>
                            </button>
                            <button 
                                class="send-btn"
                                @click="sendMessage()"
                                :disabled="!chatInput.trim() || chatLoading"
                            >
                                <span x-show="!chatLoading">Send</span>
                                <span x-show="chatLoading" class="spinner-container">
                                    <div class="spinner"></div>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>